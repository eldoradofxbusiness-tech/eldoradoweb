---
import InstagramIcon from "./InstagramIcon.astro";
import TelegramIcon from "./TelegramIcon.astro";

interface Props {
  src: string;
  link?: string;
  badge?: "ig" | "tl";
  label?: string; 
  class?: string; 
}

const { 
  src, 
  link, 
  badge, 
  label, 
  class: className = "" 
} = Astro.props;

const Tag = link ? "a" : "div";
---

<Tag
  href={link}
  target={link ? "_blank" : undefined}
  rel={link ? "noopener noreferrer" : undefined}
  class:list={[
    "relative rounded-2xl overflow-hidden border border-white/10 bg-white/[0.03] group block", // Base Styles
    link ? "cursor-pointer" : "",
    className 
  ]}
>
 
  <img
    src={src}
    alt={label || ""}
    decoding="async"
    loading="eager" 
    class="w-full h-full object-cover opacity-90 transition-transform duration-700 ease-out group-hover:scale-110"
  />


  <div class="absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent pointer-events-none"></div>


  {badge && (
    <div class="absolute top-4 right-4 z-20 transition-all duration-500 text-white/30 group-hover:scale-110 group-hover:text-white">
      {badge === "ig" && (
        <div class="group-hover:text-[#E1306C] group-hover:drop-shadow-[0_0_10px_rgba(225,48,108,0.5)] transition-colors">
          <InstagramIcon size={badge === 'ig' ? 28 : 20} class="w-6 h-6 md:w-7 md:h-7" />
        </div>
      )}
      {badge === "tl" && (
        <div class="group-hover:text-[#2AABEE] group-hover:drop-shadow-[0_0_10px_rgba(42,171,238,0.5)] transition-colors">
          <TelegramIcon size={badge === 'tl' ? 28 : 20} class="w-6 h-6 md:w-7 md:h-7" />
        </div>
      )}
    </div>
  )}

  {label && (
    <div class="absolute bottom-4 left-4 text-xs text-white/70 font-medium tracking-wide">
      {label}
    </div>
  )}
</Tag>